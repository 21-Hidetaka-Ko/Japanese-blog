RのフロントエンドExploratoryで簡単にユニコーン企業のデータをスクレイピングしてきて、分析してみた


##0. 簡単にスクレイピング

![](images/unicorn-webpage.png)
![](images/unicorn-webpage2.png)


実は、このデータは、世界中のユニコーン企業のデータを表しています。
ユニコーン企業というのは、上場していなくて、評価額が１ビリオンドル以上の評価額を得ている企業のことを指します。代表的なのだと、UberとかAirbnbとか。

どの国がユニコーンが多いのかとか、期間とバリエーションの関係性とか、いつユニコーン企業が多く生まれてるのかって気になったりしませんか？　それをExploratoryを使ってみていくことができるのでやってみます。

##1. 簡単にスクレイピング

![](images/unicorn-scraping.png)

![](images/unicorn-scraping2.png)

![](images/unicorn-scraping3.png)

まず、ここにさっきのリンクを貼るだけでデータをスクレイピングしてこれます。

![](images/unicorn-webpage3.png)



![](images/unicorn-scraping4.png)

リンクを貼るだけでデータをスクレイピングしてこれました。

![](images/unicorn.png)

もっと視覚的にわかりやすいようにチャート画面に行って、ビジュアライズ化してみます。

![](images/unicorn-chart.png)

例えば、X軸にCountryを当てはめて、国ごとのユニコーン企業の数を出してみましょう。

![](images/unicorn-chart2.png)

ここでは、スクレイピングでとってきたWEB上のデータですけど、GitHub、Google Analytics、Google Spread sheet、Mongo DB、MySQL、JSON REST APIなどのたくさんのデータベースから本当に簡単にデータをインポートしてきて分析することも可能です。


##2. 日本にユニコーン企業はいるのか？

日本にユニコーン企業がいるのか見てみましょう。

まず、テーブル画面に行ってみます。
![](images/unicorn-table.png)

＋アイコンをクリックして、コマンドを打ち込みます。日本だけにフィルタリングしたいので、filterコマンドをクリックします。
![](images/unicorn-japan.png)

次は、レコメンドされているCountryをクリックします。
![](images/unicorn-japan2.png)

次は、レコメンドされているJapanをクリックします。
![](images/unicorn-japan3.png)

実は、メルカリだけなんですよね。
![](images/unicorn-japan4.png)

ちなみに、いつもこうやってどういうカラム名、ファンクションを出したらいいのかっていうのを絶えずこのアプリケーションがチェックしてるのでいつもそのときに適したリストがレコメンドされてでてくるんです。だから、ユーザーはどこで何のfunctionを使わないといけないかを覚えておく必要はないんです。また、右に関数の説明や例が表示されるので、関数の意味をGoogleで調べる必要もありません。

##3. データから数字だけを抜き出す

次に、バリエーションのところがキャラクターになっていて、通貨の記号がはいってるんですよね。
![](images/unicorn-valuation.png)
![](images/unicorn-valuation10.png)

数字以外の記号が入っているせいで、このままだと、チャートに行って、X軸をcompany、次にY軸をvalidationにしようにもsumっていう関数が使えないんですよね。
![](images/unicorn-valuation2.png)

今回は、通貨の記号ですけど、％が入ってたり、円がはいってたり。こういうのってけっこうありますよね。そういうのってけっこう、regular expression とか使いながら地道にとっていけなかったりするんですけど、Exploratoryでは、コマンド１つでいけるんですよ。

要するに、通貨であれ、何かの記号であれ、数字だけを抜き出してきたいだけですよね？　そういうときは、まずここをクリックしてみます。

![](images/unicorn-valuation3.png)

数字だけに転換することを意味するConvert To Timeを選びます。

![](images/unicorn-valuation4.png)

すると、自動的に数字だけを抽出するコマンドが入力されます。サマリー画面も、テーブル画面もダラーを抜いたナンバーだけのカラムができましたね。

![](images/unicorn-valuation5.png)
![](images/unicorn-valuation6.png)

もう一回、さっきのチャートに戻って、Y軸をnumberのバリエーションができたのでそちらに変えます。そうすると、今度はsumっていう関数が使えますよね。
![](images/unicorn-valuation7.png)

で、これがあまりにも数が多すぎてもしょうがないので、top_n()という関数を使って、上位１０位だけ見てみましょう。

![](images/unicorn-valuation8.png)

![](images/unicorn-valuation9.png)

これで評価額がトップ１０のユニコーン企業を見ることができました。

##4.

Date.Joinedは、ユニコーン企業にいつなったか、で、そこから何年たっているかを表しています。ユニコーン企業になって、どれくらいたっているかとそこから今日までのバリエーションを比べてどういう関係性があるのかちょっと見てみたいと思いませんか？

そのために、まずこのDate.JoinのカラムがcharacterになっているのでDateに変えてみましょうと。

なので、ちょっと前のステップに戻ってやってみます。でまず、これをdateにしたいので、また新しいカラムを作りましょう。（ファンクションリストから）で、ここがmonth day yearとなっているのでmdyとします。で、そのあとにこのDate.Joinedというカラムを付け加えます。

top_n(10, valuation )の上に
mutate(date = mdy(Date.Joined)) ってカラムを指定してあげると、テーブルを見せながらDate.Joinedというのができてるんですけど、

これでサマリーを診てもらうと、こういうふうにもともとはcharacterだったのがPOXctというカレンダータイプになっているのでこういうふうにヒストグラムになっているのがわかりますね。

これを今日の日付の2016年から単純にマイナスすると、ユニコーンになってから今日までどれくらいたっているかを表すyears_since_joined という新しいカラムを作りたいと思います。

mutate( years_since_joined = 2016 - year(date))

ですので、これでもう一回チャートのほうに戻ってもらって、今度逆にScatter Plotなんか使って、でXのほうにyearを、で縦軸に、例えばvalidationを渡してもらうと、これでいくつかのdotが出てきましたよね。ここにgroup_byっていうのがあるのでここにcompanyをいれてあげるとそれぞれの会社の情報を見ることが出来ました。

例えば、Uberなんかは約３年かかって５０バリエーションになっていますね

##5.累積を表すチャートを出す

次に、最近ITバブルなんて言われたりしてますけど、ユニコーン企業がどんな感じで増えていってるのかとかって気になったりしませんか？

チャートを見てみますと、いついくつのユニコーン企業が生まれたのかをわかっても、累積されたものとして計算されてないので、どんな感じで増えていってるのかがわかりにくいですよね？なので、合計数が累積されたチャートを作りたいと思います。

そのために、まずdateをグルーピングします。

group_by(date)

これでテーブルviewを見ると、ここにdateでグルーピングされてるのがわかりますね。
次にsummarize関数を使って、グルーピングされたdateごとのユニコーン企業の数を見てみたいと思います。

summarize(count = n())

例えば、これで2012年の12月にユニコーン企業が2社生まれたりしているということがこれでわかりました。

次に、日付でソートしてみましょう。
arrange(date)

cumsum関数というのを使うと、その累積ができるようになります。なので、累積を表したcum_countという新しいカラムを作りたいと思います。

mutate(cum_count = cumsum(count))

これでチャートを見てみると（X軸をdate(day)、Line)、ユニコーン企業が2014年を機にいっきに増えてることがわかったりします。こういう分析って他のツールだと難しいですよね。

##6. Note

ユニコーン企業が2014年を機にいっきに増えてる

##最後に

ユニコーンといえば、ぼくは、以前、DHHさんのブログに感銘を受けました。

DHH氏はRuby on Railsの生みの親で、Basecampという会社のCEOでもあります。今回は彼のブログの一部を翻訳してみたので、ユニコーンという言葉に興味がある方は目を通してみてほしいです。もちろん、DHH氏本人から翻訳の許可を頂いています。

![](images/dhh-allow.png)


####ブログ: Reconsider (投資家をチームに入れていいのか？)

そう、私が今日ブログを書いた理由は、そんなあなたが、（周りにとって）やっかいで吐き気がするほどの感覚を持っていて、ディスラプト野郎になることがスタートアップが生き残るたった１つの道ではないということをあなたに気づいてほしいからです。既存産業をディスラプトしようとユニコーン企業になることに夢中になることは、スタートアップをはじめることに対して、他人のモチベーションを押し出すだけでなく、ここにいるみなさんや世界中の人達を徹底的に毒することにもなりうるのです。


今の起業家たちと話すときは、ネットワーク効果の話や、或はマネタイズのいい言葉を話題にしない日はありません。


この雰囲気では、「スタートアップ」という単語は、ビジネス全体を支配することへの追求を描くことだけに狭まっていくでしょう。スタートアップは成功によって得られる財産やユニコーン企業を創ることにとりつかれています。インターネットで、または、インターネットのために仕事をするすべての世代の人たちは、 神めいた存在であるユニコーンや成功に付随するもので溢れた強迫観念と化しています。



しかし、だれが彼らを責めることができるというのでしょうか？この一連の夢物語はたえず強まっているのです。


問題の根底から始めましょう。将来有望なユニコーンになることを期待して、少額の投資を多く行う人のことをエンジェルと呼びます。エンジェル？と不思議に思う人もいるかもしれません。実はこれは、キリストが両替商を聖堂から追い出して、「金持ちが天国へ行くよりもラクダが針の穴を通り抜ける方が簡単だ」と言い放ったという聖書の話に由来しています。


“金持ちが神の国へ入るより、ラクダが針の目を通り抜ける方が簡単である” （小さなものは不利であることのたとえであると同時に金銭は諸悪の元凶であることのたとえでもある。

（中略）

ユニコーンの象徴は、雑誌の表紙を飾るモデルの顔と同じ感じだ。何倍にも加工され、細心を払って配置され、何時間にもわたって働かされます。

ウェブは、これまでで最も優れた起業プラットフォームだと思います。参入障壁が低く、圧倒的に多くの人にリーチすることができます。僕はウェブが大好きです。そこに許可は不要で、リーチは広大で、実装に多様性がある。資金へのアクセスという架空の壁を信じちゃいけない。そんなものは存在しない。

自分のモチベーションを分析して、問いただそう。思い切って資金を断り、何か役に立つものを立ち上げよう。宇宙にちょっとのくぼみを生むだけで十分です。

自分の承認欲求を抑えましょう。

そして、いつまでも幸せに暮らしましょう。

