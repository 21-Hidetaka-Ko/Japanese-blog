![](images/excel-difficult.png)


ぱっと見て、このデータがなんのデータかとかってわかりますか？　これだけ見ただけだとなんのデータかわからないですよね〜。

これは実は、フォーブズ誌からダウンロードしてきた世界の億万長者についてのデータなんですね。

そもそも億万長者ってどの国に多いんですかね。また、億万長者ってどうやってなってるんですかね。はたまた、億万長者って男性と女性どちらのほうが多いのでしょうか？

また、最近読んだ記事↓によると、ヨーロッパは女性が活躍しやすい社会だったりするそうです。だとすると、ヨーロッパには、女性の億万長者も多かったりするのでしょうか？


![](images/europe-female.png)


こんな疑問に対して、だれでもデータ分析が簡単にできるので正確な情報にたどり着くことができるプロダクトがあります。それが、ぼくが今シリコンバレーで関わっているプロジェクトです。簡単に説明すると、コマンドラインインターフェイスで、データ解析とビジュアライズが同時にできるソフトウェアです。このソフトウェアはプログラミング言語「R」の上に開発されているので、使うコマンドや関数はRとほとんど同じになります。Rでできることは全てできます。Rは数学系のライブラリが充実しているので、統計や数学的な知識をこのプロダクトで応用することもできます。


![](images/exploratory.lp.png)


まず、ここからプロジェクトを作ることができます。

クリエイト
インポート

すると、さっきはエクセルでなんのことかわからなかったデータが、インポートしただけでわかりやすくなりましたね。例えば、このcitizenshipというカラムは、その国の市民権を持っている億万長者の人の数を表しているんですけど、ぱっと見でアメリカが一番多い。このnetworthbillionっていうだけ縦になっていますがヒストグラムになっていて、１億〜７０億　ほとんどが、１億。selfmade 起業家　inherited 親の遺産  gender 男性が女性より圧倒的に多い。


##プロダクトを知るために、ヨーロッパには、女性の億万長者も多かったりするのでしょうか？


Yearがおかしい（akira moriが３回カウントされている)


エクセルとかだとUI〜、に対し、Exploratoryはここを押すとコマンドの一覧が


2014年だけにfilterしてチャート

コマンド

すると、2014年だけになりましたよね。
つまり、Exploratoryはデータをインポートしただけで、アナリシスするときに致命的なミスに気づいて、改善するところまでできました。

チャート画面では、summeryより詳しくビジュアライズ

sumの説明、networthbillion指定しなくていい、チャートをズームできたりする機能、青はmaleでオレンジはfemale)

どの国に女性の億万長者がいるのかはこのグラフでわかりますよね？



ただ、ビジュアライゼーションだけではまだ解決できない問題があります。それぞれのバーの高さが違うから比率がわからないですよね？それぞれの国における女性の比率を計算してだしてみましょう。（テーブルに行く）


group_by（chitizenship, gender）


比率をだしていくために、それぞれの国でそれぞれの性別が何人いるかを表すカウントって名前のカラムを作ります。統合して新しいカラムを作るときは、集計を意味するsummerizeという関数を使います。カーソルを動かしながらこういったいろんなファンクションが用意されています。そういえば、もう気づいたかもしれないですけど、いつもこうやってどういうカラム名、ファンクションを出したらいいのかっていうのを絶えずこのアプリケーションがチェックしてるのでいつもそのときに適したリストがレコメンドされてでてくるんです。例えば、この時に出てくるリストは、summerize（集計）のときにだけ使えるリストです。だから、ユーザーはどこで何のfunctionを使わないといけないかを覚えておく必要はないんです。システムに従うだけで大丈夫です。averageも出したいならあるし、total出したいならsum（布石）　今回はcountしたいからn


比率を出したいんですがどうやってだします？　例えば、オーストラリアを見て下さい。femaleが4人で、maleが25人だから、女性の比率が多い国はここで、合計の29人を4人で割ったらいいですよね？　だから、とりあえず合計のカラムを作ってみましょう。今回はmutateを使います。なぜ今回はmutateなのか？

違いは、行をまとめるときは、さっきのようにsummerizeを使う。それに対し、mutateの場合は、この行のまま新しいカラムを作りたいときに計算をするときに使います。計算をしたいときは基本的にこの２つしか使いません。

今回は、それぞれの行を残しながら計算をしたいのでmutateを使う。

そのためには、合計を示すsumというfunctionを使います（totalとratioのステップを分ける）

テーブルだけだといまいちわからないですよね？　もっとビジュアライズ化して直観的に理解できるようにチャートに行ってみましょう

意味の有るデータのために母集団をfilter、トータルの数が５以上

ピンせずにやってみる

ピンというボタンを押すと、一番最後にfilterした部分が青くなりましたよね？この青くなった最後のステップのデータにこのチャートは固定されてます。今ここでSTEPを移動しましたけど、もしピンしていないとチャートはこのときのデータを取りにいこうとします。でも、ピンしているからこの青くなっているデータのままです。femaleの多い国は、ゆっくり、フランスとかドイツとかチリとかオーストラリアなんですね。

selfmadeだけにしたら、なんか国が減ってしまいましたね。スイスランドとアメリカになっていますね。　さっきのフランスやドイツなどは消えてしまいましたね。ゆっくり。

inheritedにしたら、もっと国が増えていて、トルコやオーストラリアやチリが多くなっていますね。そこから、フランスやドイツが見えますよね。

つまり、ヨーロッパでは、selfmadeで億万長者になった人はあまりいないんですね。


これでもうほとんど終わりなんですけど、最後に１つだけ見せたい機能があるんです。これはけっこう面白い機能ですし、なんで右のようなステップになっているのかっていうのがもっと理解してもらえると思いますから。ちょっと見て下さい。

いまはgenderのratioを見てるけど、そうじゃなくてindustryごとのratioを見てみたいと思いませんか？　そういうときは、groupingのSTEPに行って、ひとつ変えるだけですぐできるんです。じゃあgroupingに行ってみましょう。selfmade消す。このチャートは、一番最後の青くなっているところにピンされているんですけどいまグルーピング変えたらその結果を自動的に一番最後まで実行してチャートのデータを出すことができるんですよ。

これは、技術的に説明すると〜。


左側しかオレンジ色がないですけど、右側は緑が多いですよね。このオレンジって何なんでしょう？　見てみるとconstruction 建設でビリオネアになった人が多いですね。例えば、ブラジル、レバノン、フィリピン。第三カ国は、コンストラクションでビリオネアになった人が多くなっていますね。こっち側を見るとオレンジ色がなくなって緑ばっかになっていますね。緑はcomsumer向けの分野で億万長者になった人が多いですね。デンマークやドイツなど、ヨーロッパが多くなっています。もっと右に行くと、そのパターンにマッチしていない国がありますね。ノルウェーはコンシューマがいなくてRetailが多くなってるんですね。

この発見をシェアしたいと思いませんか？　一部の国は、建設業のビリオネアが多い。今日は時間がないんで、この辺にしますけど、こんなふうにブログを書く感覚で簡単にデータ分析のレポートを書くことができます。データアナリシスするだけじゃなくて、他の仕事仲間とかと簡単にシェアすることもできます。

##ブログをpublishする

Excelをディスる
どんどんステップ足していくこともできるし、修正することもできます。なにをするときも、いつもここのコマンドで変えることができるから、文法さえ覚えてしまえばこんなに簡単にいろんなデータをいろんな角度から見ていくことができるんです。






























##最後に

留学先である、人材の流動性が高いシリコンバレーは実力主義のイメージが強いですが、仮にそうだとすると、次のデータはどう説明すればいいのでしょうか。

1. シリコンバレーのトップ企業の管理職は78%が男性
2. エンジニアは85%が男性
3. 取締役レベルだと89%が男性
4. CEOレベルだと93%が男性
5. ベンチャー投資家だと96%が男性　

[ソース](https://medium.com/diversify-tech/i-m-a-white-guy-in-silicon-valley-and-i-m-done-buying-the-meritocracy-myth-2cc0ef9f9b60#.lql629j9y)

「シリコンバレー = 実力が全ての世界」とするのであれば、このデータからは「男性の実力 > 女性の実力」と結論付けるしかありません。だが実際には、シリコンバレーは男社会で(日本ほどではないが)、女性はキャリア面でハンデを負っています。


だから、ぼくの留学先であるシリコンバレーでは、女性エンジニアが少ないから、女性エンジニアを増やそうという動きが出てきています。ついこないだ、プログラミングでジェンダーギャップを失くそうとしているShe++という団体がスタンフォード大学でカンファレンス的なのをしていたので見に行ったりしてました。


![](images/she++.png)


社会的に恵まれている人たちの中でも、実力主義を宗教のように信じている人たちは、実力の劣る人たちを見て「努力不足だ」と蔑むことはしても、男女の問題など、その後ろにある社会の不平等に気付かないことが多い気がします。完全な実力主義社会など存在しないことを、忘れてはいけない。



##追記

- 棒グラフ以外も見れる
- データベースの豊富さ

